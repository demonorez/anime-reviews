<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/performers/new.css">
<%- include('../partials/nav') %>

<main>
  <h1><%= title %></h1>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Version</th>
        <th>Delete/Update</th>
      </tr>
    </thead>
    <tbody>
      <% performers.forEach(performer => { %>
      <tr>
        <td><%= performer.name %></td>
        <td><%= performer.version %></td>
        <td>
          <% if (performer.creator._id.equals(user?.profile._id)) { %>
            <form
              action="/performers/<%= performer._id %>?_method=DELETE" method="POST">
                <button type="submit">X</button>
                <a href="/performers/<%= performer._id %>/edit" class="btn">Update</a>
            </form> 
          <% } %>
        </td>
      </tr>
      <% }) %>
    </select>
  </p>
  <form id="add-performer-form" action="/performers" method="POST">
    <label for="name-input">Name: </label>
    <input type="text" name="name" id="name-input">
    <label for="version-select">Version: </label>
    <select name="version" id="version-select">
      <option value="Japanese">Japanese</option>
      <option value="English">English</option>
    </select>
    <button type="submit">Add Performer</button>
  </form>
</main>

<%- include('../partials/footer') %>